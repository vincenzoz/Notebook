const MongoClient=require("mongodb").MongoClient,uri=process.env.MONGO_DB_URL;async function insertNote(e){const o=new MongoClient(uri,{useUnifiedTopology:!0});await o.connect();const n=o.db("notebook").collection("notes");await n.updateOne({username:e.username},{$set:e},{upsert:!0}).catch((e=>{console.error(e)})),o.close()}async function retrieveNotesByUsername(e){const o=new MongoClient(uri,{useUnifiedTopology:!0});await o.connect();const n=o.db("notebook").collection("notes");return await n.findOne({username:e}).then((e=>(o.close(),e))).catch((e=>{console.error(e),o.close()}))}async function deleteNotesByUsername(e){const o=new MongoClient(uri,{useUnifiedTopology:!0});await o.connect();const n=o.db("notebook").collection("notes");return await n.deleteOne({username:e}).then((e=>(o.close(),e.deletedCount))).catch((e=>{console.error(e),o.close()}))}module.exports={insertNote,retrieveNotesByUsername,deleteNotesByUsername};