const{MongoClient}=require("mongodb"),uri=process.env.MONGO_DB_URL,client=new MongoClient(uri,{useUnifiedTopology:!0});client.connect();const userCollection=()=>client.db("notebook").collection("users");async function retrieveUser(e){const{username:o,password:n}=e;return userCollection().findOne({username:o,password:n}).then((e=>e)).catch((e=>{console.error(e)}))}async function updateNotes(e){await userCollection().updateOne({username:e.username},{$set:{notes:e.notes}},{upsert:!0}).catch((e=>{console.error(e)}))}async function retrieveNotesForUsername(e){return userCollection().findOne({username:e}).then((e=>e)).catch((e=>{console.error(e)}))}async function deleteNotesForUsername(e){return userCollection().updateOne({username:e},{$set:{notes:[]}}).then((e=>e.deletedCount)).catch((e=>{console.error(e)}))}module.exports={retrieveUser,updateNotes,retrieveNotesForUsername,deleteNotesForUsername};