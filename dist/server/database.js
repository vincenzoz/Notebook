const MongoClient=require("mongodb").MongoClient,uri=process.env.MONGO_DB_URL,client=new MongoClient(uri,{useUnifiedTopology:!0});db=client.connect();const noteCollection=()=>client.db("notebook").collection("notes");async function insertNote(e){await noteCollection().updateOne({username:e.username},{$set:e},{upsert:!0}).catch((e=>{console.error(e)}))}async function retrieveNotesByUsername(e){return await noteCollection().findOne({username:e}).then((e=>e)).catch((e=>{console.error(e)}))}async function deleteNotesByUsername(e){return await noteCollection().deleteOne({username:e}).then((e=>e.deletedCount)).catch((e=>{console.error(e)}))}module.exports={insertNote,retrieveNotesByUsername,deleteNotesByUsername};