const express=require("express"),bodyParser=require("body-parser"),cors=require("cors"),db=require("./database"),app=express();app.use(express.static("dist")),app.use(bodyParser.urlencoded({extended:!0})),app.use(bodyParser.json()),app.use(cors());const port=process.env.PORT||5e3;app.listen(port,(()=>{console.log(`Running on port: ${port}`)}));const path=require("path");app.get("/notebook",((e,o)=>{console.log("/notebook"),o.sendFile(path.join(__dirname,"./../index.html"))})),app.get("/check",(function(e,o){console.log("/check"),o.send("The server is up..")})),app.post("/add",(function(e,o){const s=e.body;console.log("/add",e.body),db.insertNote(s),o.sendStatus(200)})),app.get("/getNotesByUsername",(async function(e,o){console.log("/getNotesByUsername");const s=e.query.username,n=await db.retrieveNotesByUsername(s);console.log("--\x3e ",n),o.send(n)})),app.delete("/deleteNotesByUsername",(async function(e,o){const s=e.body.username;console.log("/deleteNotesByUsername",s);const n=await db.deleteNotesByUsername(s);o.json(n)}));